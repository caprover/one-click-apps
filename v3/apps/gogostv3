{"captainVersion":2,"dockerCompose":{"services":{"$$cap_appname":{"restart":"always","ports":["$$cap_gost_api_port:$$cap_gost_api_port"],"volumes":["$$cap_appname-data:/configuration"],"containerHttpPort":80,"dockerfileLines":[null,"FROM alpine:$$cap_gost_alpineversion",null,"RUN apk update && apk add --no-cache wget tar bash yq-go iptables",null,"RUN mkdir -p tmpfiles && mkdir -p /configuration",null,"RUN wget -q https://github.com/go-gost/gost/releases/download/v'$$cap_gost_stable'/gost_'$$cap_gost_stable'_linux_amd64.tar.gz","RUN tar -xzf gost_'$$cap_gost_stable'_linux_amd64.tar.gz -C tmpfiles && mv tmpfiles/gost /bin/gost && chmod +x /bin/gost",null,"RUN rm -rf tmpfiles gost_'$$cap_gost_nightly'_linux_amd64.tar.gz",null,"RUN touch /configuration/gost.yaml","RUN yq eval '.api.addr = \":$$cap_gost_api_port\"' -i /configuration/gost.yaml","RUN yq eval '.api.pathPrefix = \"/$$cap_gost_api_path\"' -i /configuration/gost.yaml","RUN yq eval '.api.accesslog = $$cap_gost_api_alog' -i /configuration/gost.yaml","RUN yq eval '.api.auth.username = \"$$cap_gost_api_user\"' -i /configuration/gost.yaml","RUN yq eval '.api.auth.password = \"$$cap_gost_api_password\"' -i /configuration/gost.yaml",null,"RUN printf '#!/bin/bash\\nexec /bin/gost -C /configuration/gost.yaml' > /start.sh",null,"ENTRYPOINT [\"/bin/bash\", \"/start.sh\"]"]}}},"variables":[{"id":"$$cap_gost_alpineversion","label":"Alpine Linux Version","description":"Check out https://hub.docker.com/_/alpine/tags for valid tags.","defaultValue":"3.22.0"},{"id":"$$cap_gost_stable","label":"GOST Stable Version","description":"Check out https://github.com/go-gost/gost/releases for versions (write down only the date part).","defaultValue":"3.1.0"},{"id":"$$cap_gost_api_path","label":"Custom prefix path for GOST WebAPI","description":"At least 3 letter all lowercase","defaultValue":"api","validRegex":"/^[a-z]{3,}$/"},{"id":"$$cap_gost_api_alog","label":"Print accessing API into log","description":"Boolean","defaultValue":true,"validRegex":"/^(true|false)$/"},{"id":"$$cap_gost_api_user","label":"Username for GOST WebAPI","description":"At least 4 letter all lowercase","defaultValue":"gostguru","validRegex":"/^[a-z]{4,}$/"},{"id":"$$cap_gost_api_password","label":"Password for GOST WebAPI","description":"At least 8 char, containing uppercase & lowercase letters, digit, also a special character.","defaultValue":"$$cap_gen_random_hex(8)","validRegex":"/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^\\w\\s])[ -~]{8,}$/"},{"id":"$$cap_gost_api_port","label":"Port for GOST WebAPI","description":"Regex makes sure you won't use a commonly known ports for other services","defaultValue":18080,"validRegex":"/^(?!21$|22$|23$|25$|53$|67$|68$|69$|80$|110$|119$|123$|143$|389$|443$|465$|587$|993$|995$|3306$|5432$|8080$|8443$|3389$)\\d{1,5}$/"}],"instructions":{"start":"Make GOST service at your exposal using its WebAPI","end":"GOST service has been successfully deployed!\n\nReview your GOST config at $$cap_appname.$$cap_root_domain:$$cap_gost_api_port/$$cap_gost_api_path/config\n\nOr start using **GOST API** in either of WebUI (https://ui.gost.run) or GUI (https://github.com/go-gost/gostctl/releases)\n**API Address**: $$cap_appname.$$cap_root_domain:$$cap_gost_api_port/$$cap_gost_api_path\n**Username**: $$cap_gost_api_user\n**Password**: $$cap_gost_api_password\n\n**Important Note**:\nIf you want to change the Mapped Port (`$$cap_gost_api_port`) you need to edit API Port at `/configuration/gost.yaml` too otherwise WebAPI access will break, also you can change other values or add GOST services into that file manually.\n\n**Post Install Instruction**:\nIf CapRover version is not 1.12+, check the **Websocket Support** box in **HTTP Settings**, otherwise it's automatically checked by the app installer"},"displayName":"GOST v3 - GO Simple Tunnel","isOfficial":false,"description":"A simple security tunnel written in Go lang","documentation":"Read their official docs at https://gost.run/en/"}
