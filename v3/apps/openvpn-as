{"captainVersion":2,"dockerCompose":{"services":{"$$cap_appname":{"image":"linuxserver/openvpn-as:$$cap_OPENVPN_VERSION","hostname":"$$cap_appname.$$cap_root_domain","environment":{"PUID":"$$cap_OPENVPN_PUID","PGID":"$$cap_OPENVPN_GUID","TZ":"$$cap_OPENVPN_TZ","INTERFACE":"$$cap_OPENVPN_INTERFACE"},"volumes":["$$cap_appname:/config"],"ports":["$$cap_OPENVPN_PORT_TCP:$$cap_OPENVPN_PORT_TCP","$$cap_OPENVPN_PORT_UDP:$$cap_OPENVPN_PORT_UDP"],"cap_add":["NET_ADMIN"],"containerHttpPort":"$$cap_OPENVPN_PORT_ADMIN"}}},"variables":[{"id":"$$cap_OPENVPN_VERSION","label":"General | Version Tag","description":"Check out their valid tags at https://hub.docker.com/r/linuxserver/openvpn-as/tags","defaultValue":"2.9.0-5c5bd120-Ubuntu18-ls124","validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_TZ","label":"General | Timezone","description":"Timezone for the application, find yours at https://en.wikipedia.org/wiki/List_of_tz_database_time_zones","defaultValue":"UTC","validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_PUID","label":"General | User ID","description":"User ID that the process uses, run `id $user` on your instance to see the ID.","defaultValue":1000,"validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_GUID","label":"General | Group ID","description":"Group ID that the process uses, run `id $user` on your instance to see the ID.","defaultValue":1000,"validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_PORT_ADMIN","label":"Networking | Admin GUI Port","description":"Port of the administration interface. Should not be changed.","defaultValue":943,"validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_PORT_TCP","label":"Networking | TCP Port","description":"Port of the TCP connections. Should not be changed.","defaultValue":9443,"validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_PORT_UDP","label":"Networking | UDP Port","description":"Port of the UDP connections. Should not be changed.","defaultValue":1194,"validRegex":"/.{1,}/"},{"id":"$$cap_OPENVPN_INTERFACE","label":"Networking | Interface","description":"With bridge networking, leave it blank (or enter `eth0`). If `host` or `macvlan`, set it to your host's network interface, found by running `ifconfig`."}],"instructions":{"start":"OpenVPN is a full featured, open-source VPN solution that accommodates a wide range of configurations.\n\n**Important notes:**\n- The provider of this image (LinuxServer) has decided to **deprecate** it in favor of WireGuard\n- If you are using CapRover version `1.10.1` or older, you will need to **override CapRover's configuration** to use the newer Docker API version `1.4.1` (this can be done manually or by running `echo \"{\\\"dockerApiVersion\\\":\\\"v1.41\\\"}\" > /captain/data/config-override.json`)\n- You need **access via SSH** to your server after deployment to modify a file (only once)\n- You may need to **open the ports** `1194` and `9443` on your firewall","end":"OpenVPN has been deployed **successfully**!\n\nBefore you can start using it, you need to perform some steps.\nYou only need to do this once.\n**Please screenshot/copy the following instructions before proceeding:**\n\n1. Go to the **HTTP Settings** of your deployment `$$cap_appname` here in CapRover\n2. **Enable HTTPS**\n3. **Edit Default Nginx Configurations** and search for the line `set $upstream http://<%-s.localDomain%>:<%-s.containerHttpPort%>;` and replace `http://` with `https://`\n4. Go to **App Configs** and paste the following snippet into **Service Update Override**: `{ \"TaskTemplate\": { \"ContainerSpec\": { \"CapabilityAdd\": [\"CAP_NET_ADMIN\"], \"Hostname\": \"$$cap_appname.$$cap_root_domain\" } } }`\n5. **Save & Update** and wait a minute\n6. Go to https://$$cap_appname.$$cap_root_domain/admin and log in using user `admin` and password `password`\n7. Navigate to **Configuration** > **Network Settings** and replace the value in **Hostname Or IP Address** with `$$cap_appname.$$cap_root_domain` and update the server (if you get an error just refresh the page, log back in to the admin page (`/admin`) and proceed with the next step)\n8. Navigate to **User Management** > **User Permissions** and add **New Username**, set a password, make it an admin and **Save Settings**.\n9. Log out and log in as the new user\n10. Navigate to **User Management** > **User Permissions** and delete the `admin` account\n11. Access via SSH to your server and execute `docker exec -it $(docker ps --filter name=srv-captain--$$cap_appname -q) sed -i '/boot_pam_users.0=admin/c\\boot_pam_users.0=abcnonexistentuserxyz' /config/etc/as.conf` to block the `admin` account and prevent its creation during container restart\n\nEnjoy your private VPN!"},"displayName":"OpenVPN Access Server","isOfficial":false,"description":"Full featured secure network tunneling VPN software.","documentation":"https://openvpn.net/index.php/access-server/overview.html"}
