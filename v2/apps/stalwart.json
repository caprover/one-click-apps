{"captainVersion":2,"dockerCompose":{"services":{"$$cap_appname":{"image":"stalwartlabs/stalwart:$$cap_stalwart_version","restart":"always","volumes":["$$cap_appname-data:/opt/stalwart"],"ports":["25:25","587:587","465:465","993:993"],"containerHttpPort":"8080"}}},"variables":[{"id":"$$cap_stalwart_version","label":"Stalwart Version","defaultValue":"v0.15.4","description":"Check Docker Hub for tags https://hub.docker.com/r/stalwartlabs/stalwart/tags. Default is v0.15.4 .","validRegex":"/.{1,}/"}],"instructions":{"start":"Stalwart Mail Server is a high-performance, open-source mail server solution.\n\n⚠️ **CRITICAL PREREQUISITES:**\n1. Ensure ports **25, 587, 465, and 993** are NOT used by other apps on this server.\n2. If you have Postal or Poste.io running, stop them before deploying.\n3. Verify if your VPS provider blocks outgoing connections on Port 25.","end":"✅ **Deployment Successful!**\n\nBefore you start using it, please follow these steps to ensure stability and correct IP detection.\n\n**Step 1: Enable Host Networking (Recommended for Real IP detection)**\n1. Go to **App Configs** for `$$cap_appname`.\n2. Paste the following into the **Pre-Deploy Script** box:\n   `var preDeployFunction = function (captainAppObj, dockerUpdateObject) {var ports = dockerUpdateObject.EndpointSpec.Ports || [];ports.forEach(function (port) {port.PublishMode = \"host\";});return Promise.resolve(dockerUpdateObject);};`\n3. Click **Save & Update**.\n\n**Step 2: Enable HTTPS**\n1. Go to **HTTP Settings**.\n2. Enable **HTTPS** and **Force HTTPS**.\n3. Ensure \"Container Port\" is set to `8080`.\n\n**Step 3: Initial Setup & Password**\n1. Go to **App Configs** -> **View Logs** (document icon).\n2. Look for a line saying: `Admin password: XXXXXXXX`. Copy it.\n3. Access your dashboard at: `https://$$cap_appname.$$cap_root_domain`\n4. Log in with user `admin` and the password from the logs."},"displayName":"Stalwart Mail Server","isOfficial":true,"description":"Modern, All-in-One Mail Server written in Rust (JMAP, IMAP, SMTP). Faster and lighter than Postal/Poste.io.","documentation":"https://stalw.art/docs/"}
