captainVersion: 4
services:
    $$cap_appname:
        image: collabora/code:$$cap_collabora_version
        restart: always
        environment:
            # Removed WOPI host domain and related settings
            extra_params: --o:ssl.enable=false --o:ssl.termination=true
            username: $$cap_admin_user
            password: $$cap_admin_pass
        caproverExtra:
            containerHttpPort: '9980'
caproverOneClickApp:
    variables:
        - id: $$cap_admin_user
          label: Admin username
          description: Username for web admin interface
          defaultValue: admin
          validRegex: /^([a-zA-Z0-9])+$/
        - id: $$cap_admin_pass
          label: Admin password
          description: Admin password must be at least 30 characters. Please use a random string.
          defaultValue: $$cap_gen_random_hex(32)
          validRegex: /^[^\@]{30,}$/
        - id: $$cap_collabora_version
          label: Collabora CODE Version
          defaultValue: 25.04.2.1.1
          description: Check out their docker page for the valid tags https://hub.docker.com/r/collabora/code/tags/
          validRegex: /^([^\s^\/])+$/
    instructions:
        start: Collabora CODE version is an online Office Suite. You can use it independently to create and edit documents. The install will take about a minute for the process to finish.
        end: Collabora is deployed and available as $$cap_appname. You can access the Collabora Online interface directly through the web browser. IMPORTANT - Enable web sockets to handle requests properly. That's all, you can use Collabora Online independently. Go to this url for admin page - $$cap_appname.$$cap_root_domain/browser/dist/admin/admin.html
    displayName: Collabora Online - Independent
    isOfficial: true
    description: Collabora Online Development Edition - Independent is an online and collaborating office suite
    documentation: https://www.collaboraoffice.com/code/docker/
