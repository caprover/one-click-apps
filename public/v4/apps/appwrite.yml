captainVersion: 4

services:
    $$cap_appname-redis:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM redis:7.2.4-alpine
                - CMD ["redis-server", "--maxmemory", "512mb", "--maxmemory-policy", "allkeys-lru", "--maxmemory-samples", "5"]
        volumes:
            - $$cap_appname-redis:/data

    $$cap_appname-mariadb:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM mariadb:10.11
                - CMD ["mysqld", "--innodb-flush-method=fsync"]
        volumes:
            - $$cap_appname-mariadb:/var/lib/mysql
        environment:
            MYSQL_ROOT_PASSWORD: $$cap_APP_DB_ROOT_PASS
            MYSQL_DATABASE: $$cap_APP_DB_SCHEMA
            MYSQL_USER: $$cap_APP_DB_USER
            MYSQL_PASSWORD: $$cap_APP_DB_PASS
            MARIADB_AUTO_UPGRADE: 1

    $$cap_appname:
        image: appwrite/appwrite:$$cap_APP_VERSION
        volumes:
            - $$cap_appname-uploads:/storage/uploads
            - $$cap_appname-cache:/storage/cache
            - $$cap_appname-config:/storage/config
            - $$cap_appname-certificates:/storage/certificates
            - $$cap_appname-functions:/storage/functions
            - $$cap_appname-sites:/storage/sites
            - $$cap_appname-builds:/storage/builds
            - $$cap_appname-imports:/storage/imports
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_LOCALE: $$cap_APP_LOCALE
            _APP_COMPRESSION_MIN_SIZE_BYTES: $$cap_APP_COMPRESSION_MIN_SIZE_BYTES
            _APP_CONSOLE_WHITELIST_ROOT: $$cap_APP_CONSOLE_WHITELIST_ROOT
            _APP_CONSOLE_WHITELIST_EMAILS: $$cap_APP_CONSOLE_WHITELIST_EMAILS
            _APP_CONSOLE_SESSION_ALERTS: $$cap_APP_CONSOLE_SESSION_ALERTS
            _APP_CONSOLE_WHITELIST_IPS: $$cap_APP_CONSOLE_WHITELIST_IPS
            _APP_CONSOLE_HOSTNAMES: $$cap_APP_CONSOLE_HOSTNAMES
            _APP_SYSTEM_EMAIL_NAME: $$cap_APP_SYSTEM_EMAIL_NAME
            _APP_SYSTEM_EMAIL_ADDRESS: $$cap_APP_SYSTEM_EMAIL_ADDRESS
            _APP_EMAIL_SECURITY: $$cap_APP_EMAIL_SECURITY
            _APP_SYSTEM_RESPONSE_FORMAT: $$cap_APP_SYSTEM_RESPONSE_FORMAT
            _APP_OPTIONS_ABUSE: $$cap_APP_OPTIONS_ABUSE
            _APP_OPTIONS_ROUTER_PROTECTION: $$cap_APP_OPTIONS_ROUTER_PROTECTION
            _APP_OPTIONS_FORCE_HTTPS: $$cap_APP_OPTIONS_FORCE_HTTPS
            _APP_OPTIONS_ROUTER_FORCE_HTTPS: $$cap_APP_OPTIONS_ROUTER_FORCE_HTTPS
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_DOMAIN_TARGET_CNAME: $$cap_APP_DOMAIN_TARGET_CNAME
            _APP_DOMAIN_TARGET_AAAA: $$cap_APP_DOMAIN_TARGET_AAAA
            _APP_DOMAIN_TARGET_A: $$cap_APP_DOMAIN_TARGET_A
            _APP_DOMAIN_FUNCTIONS: $$cap_APP_DOMAIN_FUNCTIONS
            _APP_DOMAIN_SITES: $$cap_APP_DOMAIN_SITES
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_SMTP_HOST: $$cap_APP_SMTP_HOST
            _APP_SMTP_PORT: $$cap_APP_SMTP_PORT
            _APP_SMTP_SECURE: $$cap_APP_SMTP_SECURE
            _APP_SMTP_USERNAME: $$cap_APP_SMTP_USERNAME
            _APP_SMTP_PASSWORD: $$cap_APP_SMTP_PASSWORD
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_STORAGE_LIMIT: $$cap_APP_STORAGE_LIMIT
            _APP_STORAGE_PREVIEW_LIMIT: $$cap_APP_STORAGE_PREVIEW_LIMIT
            _APP_STORAGE_ANTIVIRUS: $$cap_APP_STORAGE_ANTIVIRUS
            _APP_STORAGE_ANTIVIRUS_HOST: $$cap_APP_STORAGE_ANTIVIRUS_HOST
            _APP_STORAGE_ANTIVIRUS_PORT: $$cap_APP_STORAGE_ANTIVIRUS_PORT
            _APP_STORAGE_DEVICE: $$cap_APP_STORAGE_DEVICE
            _APP_STORAGE_S3_ACCESS_KEY: $$cap_APP_STORAGE_S3_ACCESS_KEY
            _APP_STORAGE_S3_SECRET: $$cap_APP_STORAGE_S3_SECRET
            _APP_STORAGE_S3_REGION: $$cap_APP_STORAGE_S3_REGION
            _APP_STORAGE_S3_BUCKET: $$cap_APP_STORAGE_S3_BUCKET
            _APP_STORAGE_S3_ENDPOINT: $$cap_APP_STORAGE_S3_ENDPOINT
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: $$cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
            _APP_STORAGE_DO_SPACES_SECRET: $$cap_APP_STORAGE_DO_SPACES_SECRET
            _APP_STORAGE_DO_SPACES_REGION: $$cap_APP_STORAGE_DO_SPACES_REGION
            _APP_STORAGE_DO_SPACES_BUCKET: $$cap_APP_STORAGE_DO_SPACES_BUCKET
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: $$cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
            _APP_STORAGE_BACKBLAZE_SECRET: $$cap_APP_STORAGE_BACKBLAZE_SECRET
            _APP_STORAGE_BACKBLAZE_REGION: $$cap_APP_STORAGE_BACKBLAZE_REGION
            _APP_STORAGE_BACKBLAZE_BUCKET: $$cap_APP_STORAGE_BACKBLAZE_BUCKET
            _APP_STORAGE_LINODE_ACCESS_KEY: $$cap_APP_STORAGE_LINODE_ACCESS_KEY
            _APP_STORAGE_LINODE_SECRET: $$cap_APP_STORAGE_LINODE_SECRET
            _APP_STORAGE_LINODE_REGION: $$cap_APP_STORAGE_LINODE_REGION
            _APP_STORAGE_LINODE_BUCKET: $$cap_APP_STORAGE_LINODE_BUCKET
            _APP_STORAGE_WASABI_ACCESS_KEY: $$cap_APP_STORAGE_WASABI_ACCESS_KEY
            _APP_STORAGE_WASABI_SECRET: $$cap_APP_STORAGE_WASABI_SECRET
            _APP_STORAGE_WASABI_REGION: $$cap_APP_STORAGE_WASABI_REGION
            _APP_STORAGE_WASABI_BUCKET: $$cap_APP_STORAGE_WASABI_BUCKET
            _APP_COMPUTE_SIZE_LIMIT: $$cap_APP_COMPUTE_SIZE_LIMIT
            _APP_FUNCTIONS_TIMEOUT: $$cap_APP_FUNCTIONS_TIMEOUT
            _APP_SITES_TIMEOUT: $$cap_APP_SITES_TIMEOUT
            _APP_COMPUTE_BUILD_TIMEOUT: $$cap_APP_COMPUTE_BUILD_TIMEOUT
            _APP_COMPUTE_CPUS: $$cap_APP_COMPUTE_CPUS
            _APP_COMPUTE_MEMORY: $$cap_APP_COMPUTE_MEMORY
            _APP_FUNCTIONS_RUNTIMES: $$cap_APP_FUNCTIONS_RUNTIMES
            _APP_SITES_RUNTIMES: $$cap_APP_SITES_RUNTIMES
            _APP_EXECUTOR_SECRET: $$cap_APP_EXECUTOR_SECRET
            _APP_EXECUTOR_HOST: http://srv-captain--$$cap_appname-executor/v1
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_MAINTENANCE_INTERVAL: $$cap_APP_MAINTENANCE_INTERVAL
            _APP_MAINTENANCE_DELAY: $$cap_APP_MAINTENANCE_DELAY
            _APP_MAINTENANCE_START_TIME: $$cap_APP_MAINTENANCE_START_TIME
            _APP_MAINTENANCE_RETENTION_EXECUTION: $$cap_APP_MAINTENANCE_RETENTION_EXECUTION
            _APP_MAINTENANCE_RETENTION_CACHE: $$cap_APP_MAINTENANCE_RETENTION_CACHE
            _APP_MAINTENANCE_RETENTION_ABUSE: $$cap_APP_MAINTENANCE_RETENTION_ABUSE
            _APP_MAINTENANCE_RETENTION_AUDIT: $$cap_APP_MAINTENANCE_RETENTION_AUDIT
            _APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE: $$cap_APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE
            _APP_MAINTENANCE_RETENTION_USAGE_HOURLY: $$cap_APP_MAINTENANCE_RETENTION_USAGE_HOURLY
            _APP_MAINTENANCE_RETENTION_SCHEDULES: $$cap_APP_MAINTENANCE_RETENTION_SCHEDULES
            _APP_SMS_PROVIDER: $$cap_APP_SMS_PROVIDER
            _APP_SMS_FROM: $$cap_APP_SMS_FROM
            _APP_GRAPHQL_MAX_BATCH_SIZE: $$cap_APP_GRAPHQL_MAX_BATCH_SIZE
            _APP_GRAPHQL_MAX_COMPLEXITY: $$cap_APP_GRAPHQL_MAX_COMPLEXITY
            _APP_GRAPHQL_MAX_DEPTH: $$cap_APP_GRAPHQL_MAX_DEPTH
            _APP_VCS_GITHUB_APP_NAME: $$cap_APP_VCS_GITHUB_APP_NAME
            _APP_VCS_GITHUB_PRIVATE_KEY: $$cap_APP_VCS_GITHUB_PRIVATE_KEY
            _APP_VCS_GITHUB_APP_ID: $$cap_APP_VCS_GITHUB_APP_ID
            _APP_VCS_GITHUB_WEBHOOK_SECRET: $$cap_APP_VCS_GITHUB_WEBHOOK_SECRET
            _APP_VCS_GITHUB_CLIENT_SECRET: $$cap_APP_VCS_GITHUB_CLIENT_SECRET
            _APP_VCS_GITHUB_CLIENT_ID: $$cap_APP_VCS_GITHUB_CLIENT_ID
            _APP_MIGRATIONS_FIREBASE_CLIENT_ID: $$cap_APP_MIGRATIONS_FIREBASE_CLIENT_ID
            _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET: $$cap_APP_MIGRATIONS_FIREBASE_CLIENT_SECRET
            _APP_ASSISTANT_OPENAI_API_KEY: $$cap_APP_ASSISTANT_OPENAI_API_KEY

    $$cap_appname-console:
        caproverExtra:
            notExposeAsWebApp: 'true'
        image: appwrite/console:$$cap_CONSOLE_VERSION

    $$cap_appname-realtime:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["realtime"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPTIONS_ABUSE: $$cap_APP_OPTIONS_ABUSE
            _APP_OPTIONS_ROUTER_PROTECTION: $$cap_APP_OPTIONS_ROUTER_PROTECTION
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-executor:
        image: openruntimes/executor:$$cap_OPENRUNTIMES_EXECUTOR_VERSION
        caproverExtra:
            notExposeAsWebApp: 'true'
        hostname: exc1
        stop_signal: SIGINT
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - $$cap_appname-functions:/storage/functions
            - $$cap_appname-sites:/storage/sites
            - $$cap_appname-builds:/storage/builds
            - /tmp:/tmp
        environment:
            OPR_EXECUTOR_INACTIVE_TRESHOLD: $$cap_APP_COMPUTE_INACTIVE_THRESHOLD
            OPR_EXECUTOR_MAINTENANCE_INTERVAL: $$cap_APP_COMPUTE_MAINTENANCE_INTERVAL
            OPR_EXECUTOR_NETWORK: $$cap_APP_COMPUTE_RUNTIMES_NETWORK
            OPR_EXECUTOR_DOCKER_HUB_USERNAME: $$cap_APP_DOCKER_HUB_USERNAME
            OPR_EXECUTOR_DOCKER_HUB_PASSWORD: $$cap_APP_DOCKER_HUB_PASSWORD
            OPR_EXECUTOR_ENV: $$cap_APP_ENV
            OPR_EXECUTOR_RUNTIMES: $$cap_APP_FUNCTIONS_RUNTIMES,$$cap_APP_SITES_RUNTIMES
            OPR_EXECUTOR_SECRET: $$cap_APP_EXECUTOR_SECRET
            OPR_EXECUTOR_RUNTIME_VERSIONS: v5
            OPR_EXECUTOR_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            OPR_EXECUTOR_STORAGE_DEVICE: $$cap_APP_STORAGE_DEVICE
            OPR_EXECUTOR_STORAGE_S3_ACCESS_KEY: $$cap_APP_STORAGE_S3_ACCESS_KEY
            OPR_EXECUTOR_STORAGE_S3_SECRET: $$cap_APP_STORAGE_S3_SECRET
            OPR_EXECUTOR_STORAGE_S3_REGION: $$cap_APP_STORAGE_S3_REGION
            OPR_EXECUTOR_STORAGE_S3_BUCKET: $$cap_APP_STORAGE_S3_BUCKET
            OPR_EXECUTOR_STORAGE_S3_ENDPOINT: $$cap_APP_STORAGE_S3_ENDPOINT
            OPR_EXECUTOR_STORAGE_DO_SPACES_ACCESS_KEY: $$cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
            OPR_EXECUTOR_STORAGE_DO_SPACES_SECRET: $$cap_APP_STORAGE_DO_SPACES_SECRET
            OPR_EXECUTOR_STORAGE_DO_SPACES_REGION: $$cap_APP_STORAGE_DO_SPACES_REGION
            OPR_EXECUTOR_STORAGE_DO_SPACES_BUCKET: $$cap_APP_STORAGE_DO_SPACES_BUCKET
            OPR_EXECUTOR_STORAGE_BACKBLAZE_ACCESS_KEY: $$cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
            OPR_EXECUTOR_STORAGE_BACKBLAZE_SECRET: $$cap_APP_STORAGE_BACKBLAZE_SECRET
            OPR_EXECUTOR_STORAGE_BACKBLAZE_REGION: $$cap_APP_STORAGE_BACKBLAZE_REGION
            OPR_EXECUTOR_STORAGE_BACKBLAZE_BUCKET: $$cap_APP_STORAGE_BACKBLAZE_BUCKET
            OPR_EXECUTOR_STORAGE_LINODE_ACCESS_KEY: $$cap_APP_STORAGE_LINODE_ACCESS_KEY
            OPR_EXECUTOR_STORAGE_LINODE_SECRET: $$cap_APP_STORAGE_LINODE_SECRET
            OPR_EXECUTOR_STORAGE_LINODE_REGION: $$cap_APP_STORAGE_LINODE_REGION
            OPR_EXECUTOR_STORAGE_LINODE_BUCKET: $$cap_APP_STORAGE_LINODE_BUCKET
            OPR_EXECUTOR_STORAGE_WASABI_ACCESS_KEY: $$cap_APP_STORAGE_WASABI_ACCESS_KEY
            OPR_EXECUTOR_STORAGE_WASABI_SECRET: $$cap_APP_STORAGE_WASABI_SECRET
            OPR_EXECUTOR_STORAGE_WASABI_REGION: $$cap_APP_STORAGE_WASABI_REGION
            OPR_EXECUTOR_STORAGE_WASABI_BUCKET: $$cap_APP_STORAGE_WASABI_BUCKET

    $$cap_appname-worker-audits:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-audits"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-worker-webhooks:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-webhooks"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_EMAIL_SECURITY: $$cap_APP_EMAIL_SECURITY
            _APP_SYSTEM_SECURITY_EMAIL_ADDRESS: $$cap_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-worker-deletes:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-deletes"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        volumes:
            - $$cap_appname-uploads:/storage/uploads
            - $$cap_appname-cache:/storage/cache
            - $$cap_appname-functions:/storage/functions
            - $$cap_appname-sites:/storage/sites
            - $$cap_appname-builds:/storage/builds
            - $$cap_appname-certificates:/storage/certificates
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_STORAGE_DEVICE: $$cap_APP_STORAGE_DEVICE
            _APP_STORAGE_S3_ACCESS_KEY: $$cap_APP_STORAGE_S3_ACCESS_KEY
            _APP_STORAGE_S3_SECRET: $$cap_APP_STORAGE_S3_SECRET
            _APP_STORAGE_S3_REGION: $$cap_APP_STORAGE_S3_REGION
            _APP_STORAGE_S3_BUCKET: $$cap_APP_STORAGE_S3_BUCKET
            _APP_STORAGE_S3_ENDPOINT: $$cap_APP_STORAGE_S3_ENDPOINT
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: $$cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
            _APP_STORAGE_DO_SPACES_SECRET: $$cap_APP_STORAGE_DO_SPACES_SECRET
            _APP_STORAGE_DO_SPACES_REGION: $$cap_APP_STORAGE_DO_SPACES_REGION
            _APP_STORAGE_DO_SPACES_BUCKET: $$cap_APP_STORAGE_DO_SPACES_BUCKET
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: $$cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
            _APP_STORAGE_BACKBLAZE_SECRET: $$cap_APP_STORAGE_BACKBLAZE_SECRET
            _APP_STORAGE_BACKBLAZE_REGION: $$cap_APP_STORAGE_BACKBLAZE_REGION
            _APP_STORAGE_BACKBLAZE_BUCKET: $$cap_APP_STORAGE_BACKBLAZE_BUCKET
            _APP_STORAGE_LINODE_ACCESS_KEY: $$cap_APP_STORAGE_LINODE_ACCESS_KEY
            _APP_STORAGE_LINODE_SECRET: $$cap_APP_STORAGE_LINODE_SECRET
            _APP_STORAGE_LINODE_REGION: $$cap_APP_STORAGE_LINODE_REGION
            _APP_STORAGE_LINODE_BUCKET: $$cap_APP_STORAGE_LINODE_BUCKET
            _APP_STORAGE_WASABI_ACCESS_KEY: $$cap_APP_STORAGE_WASABI_ACCESS_KEY
            _APP_STORAGE_WASABI_SECRET: $$cap_APP_STORAGE_WASABI_SECRET
            _APP_STORAGE_WASABI_REGION: $$cap_APP_STORAGE_WASABI_REGION
            _APP_STORAGE_WASABI_BUCKET: $$cap_APP_STORAGE_WASABI_BUCKET
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_EXECUTOR_SECRET: $$cap_APP_EXECUTOR_SECRET
            _APP_EXECUTOR_HOST: http://srv-captain--$$cap_appname-executor/v1
            _APP_MAINTENANCE_RETENTION_ABUSE: $$cap_APP_MAINTENANCE_RETENTION_ABUSE
            _APP_MAINTENANCE_RETENTION_AUDIT: $$cap_APP_MAINTENANCE_RETENTION_AUDIT
            _APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE: $$cap_APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE
            _APP_MAINTENANCE_RETENTION_EXECUTION: $$cap_APP_MAINTENANCE_RETENTION_EXECUTION
            _APP_SYSTEM_SECURITY_EMAIL_ADDRESS: $$cap_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
            _APP_EMAIL_CERTIFICATES: $$cap_APP_EMAIL_CERTIFICATES

    $$cap_appname-worker-databases:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-databases"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-worker-builds:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-builds"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        volumes:
            - $$cap_appname-functions:/storage/functions
            - $$cap_appname-sites:/storage/sites
            - $$cap_appname-builds:/storage/builds
            - $$cap_appname-uploads:/storage/uploads
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_EXECUTOR_SECRET: $$cap_APP_EXECUTOR_SECRET
            _APP_EXECUTOR_HOST: http://srv-captain--$$cap_appname-executor/v1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_VCS_GITHUB_APP_NAME: $$cap_APP_VCS_GITHUB_APP_NAME
            _APP_VCS_GITHUB_PRIVATE_KEY: $$cap_APP_VCS_GITHUB_PRIVATE_KEY
            _APP_VCS_GITHUB_APP_ID: $$cap_APP_VCS_GITHUB_APP_ID
            _APP_FUNCTIONS_TIMEOUT: $$cap_APP_FUNCTIONS_TIMEOUT
            _APP_SITES_TIMEOUT: $$cap_APP_SITES_TIMEOUT
            _APP_COMPUTE_BUILD_TIMEOUT: $$cap_APP_COMPUTE_BUILD_TIMEOUT
            _APP_COMPUTE_CPUS: $$cap_APP_COMPUTE_CPUS
            _APP_COMPUTE_MEMORY: $$cap_APP_COMPUTE_MEMORY
            _APP_COMPUTE_SIZE_LIMIT: $$cap_APP_COMPUTE_SIZE_LIMIT
            _APP_OPTIONS_FORCE_HTTPS: $$cap_APP_OPTIONS_FORCE_HTTPS
            _APP_OPTIONS_ROUTER_FORCE_HTTPS: $$cap_APP_OPTIONS_ROUTER_FORCE_HTTPS
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_STORAGE_DEVICE: $$cap_APP_STORAGE_DEVICE
            _APP_STORAGE_S3_ACCESS_KEY: $$cap_APP_STORAGE_S3_ACCESS_KEY
            _APP_STORAGE_S3_SECRET: $$cap_APP_STORAGE_S3_SECRET
            _APP_STORAGE_S3_REGION: $$cap_APP_STORAGE_S3_REGION
            _APP_STORAGE_S3_BUCKET: $$cap_APP_STORAGE_S3_BUCKET
            _APP_STORAGE_S3_ENDPOINT: $$cap_APP_STORAGE_S3_ENDPOINT
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: $$cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
            _APP_STORAGE_DO_SPACES_SECRET: $$cap_APP_STORAGE_DO_SPACES_SECRET
            _APP_STORAGE_DO_SPACES_REGION: $$cap_APP_STORAGE_DO_SPACES_REGION
            _APP_STORAGE_DO_SPACES_BUCKET: $$cap_APP_STORAGE_DO_SPACES_BUCKET
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: $$cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
            _APP_STORAGE_BACKBLAZE_SECRET: $$cap_APP_STORAGE_BACKBLAZE_SECRET
            _APP_STORAGE_BACKBLAZE_REGION: $$cap_APP_STORAGE_BACKBLAZE_REGION
            _APP_STORAGE_BACKBLAZE_BUCKET: $$cap_APP_STORAGE_BACKBLAZE_BUCKET
            _APP_STORAGE_LINODE_ACCESS_KEY: $$cap_APP_STORAGE_LINODE_ACCESS_KEY
            _APP_STORAGE_LINODE_SECRET: $$cap_APP_STORAGE_LINODE_SECRET
            _APP_STORAGE_LINODE_REGION: $$cap_APP_STORAGE_LINODE_REGION
            _APP_STORAGE_LINODE_BUCKET: $$cap_APP_STORAGE_LINODE_BUCKET
            _APP_STORAGE_WASABI_ACCESS_KEY: $$cap_APP_STORAGE_WASABI_ACCESS_KEY
            _APP_STORAGE_WASABI_SECRET: $$cap_APP_STORAGE_WASABI_SECRET
            _APP_STORAGE_WASABI_REGION: $$cap_APP_STORAGE_WASABI_REGION
            _APP_STORAGE_WASABI_BUCKET: $$cap_APP_STORAGE_WASABI_BUCKET
            _APP_DOMAIN_SITES: $$cap_APP_DOMAIN_SITES

    $$cap_appname-worker-certificates:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-certificates"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        volumes:
            - $$cap_appname-config:/storage/config
            - $$cap_appname-certificates:/storage/certificates
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_DOMAIN_TARGET_CNAME: $$cap_APP_DOMAIN_TARGET_CNAME
            _APP_DOMAIN_TARGET_AAAA: $$cap_APP_DOMAIN_TARGET_AAAA
            _APP_DOMAIN_TARGET_A: $$cap_APP_DOMAIN_TARGET_A
            _APP_DOMAIN_FUNCTIONS: $$cap_APP_DOMAIN_FUNCTIONS
            _APP_EMAIL_CERTIFICATES: $$cap_APP_EMAIL_CERTIFICATES
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-worker-functions:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-functions"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
            - $$cap_appname-executor
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_OPTIONS_FORCE_HTTPS: $$cap_APP_OPTIONS_FORCE_HTTPS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_FUNCTIONS_TIMEOUT: $$cap_APP_FUNCTIONS_TIMEOUT
            _APP_SITES_TIMEOUT: $$cap_APP_SITES_TIMEOUT
            _APP_COMPUTE_BUILD_TIMEOUT: $$cap_APP_COMPUTE_BUILD_TIMEOUT
            _APP_COMPUTE_CPUS: $$cap_APP_COMPUTE_CPUS
            _APP_COMPUTE_MEMORY: $$cap_APP_COMPUTE_MEMORY
            _APP_EXECUTOR_SECRET: $$cap_APP_EXECUTOR_SECRET
            _APP_EXECUTOR_HOST: http://srv-captain--$$cap_appname-executor/v1
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_DOCKER_HUB_USERNAME: $$cap_APP_DOCKER_HUB_USERNAME
            _APP_DOCKER_HUB_PASSWORD: $$cap_APP_DOCKER_HUB_PASSWORD
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG

    $$cap_appname-worker-mails:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-mails"]
        depends_on:
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_SYSTEM_EMAIL_NAME: $$cap_APP_SYSTEM_EMAIL_NAME
            _APP_SYSTEM_EMAIL_ADDRESS: $$cap_APP_SYSTEM_EMAIL_ADDRESS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_SMTP_HOST: $$cap_APP_SMTP_HOST
            _APP_SMTP_PORT: $$cap_APP_SMTP_PORT
            _APP_SMTP_SECURE: $$cap_APP_SMTP_SECURE
            _APP_SMTP_USERNAME: $$cap_APP_SMTP_USERNAME
            _APP_SMTP_PASSWORD: $$cap_APP_SMTP_PASSWORD
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_OPTIONS_FORCE_HTTPS: $$cap_APP_OPTIONS_FORCE_HTTPS

    $$cap_appname-worker-messaging:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-messaging"]
        volumes:
            - $$cap_appname-uploads:/storage/uploads
        depends_on:
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_SMS_FROM: $$cap_APP_SMS_FROM
            _APP_SMS_PROVIDER: $$cap_APP_SMS_PROVIDER
            _APP_STORAGE_DEVICE: $$cap_APP_STORAGE_DEVICE
            _APP_STORAGE_S3_ACCESS_KEY: $$cap_APP_STORAGE_S3_ACCESS_KEY
            _APP_STORAGE_S3_SECRET: $$cap_APP_STORAGE_S3_SECRET
            _APP_STORAGE_S3_REGION: $$cap_APP_STORAGE_S3_REGION
            _APP_STORAGE_S3_BUCKET: $$cap_APP_STORAGE_S3_BUCKET
            _APP_STORAGE_S3_ENDPOINT: $$cap_APP_STORAGE_S3_ENDPOINT
            _APP_STORAGE_DO_SPACES_ACCESS_KEY: $$cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
            _APP_STORAGE_DO_SPACES_SECRET: $$cap_APP_STORAGE_DO_SPACES_SECRET
            _APP_STORAGE_DO_SPACES_REGION: $$cap_APP_STORAGE_DO_SPACES_REGION
            _APP_STORAGE_DO_SPACES_BUCKET: $$cap_APP_STORAGE_DO_SPACES_BUCKET
            _APP_STORAGE_BACKBLAZE_ACCESS_KEY: $$cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
            _APP_STORAGE_BACKBLAZE_SECRET: $$cap_APP_STORAGE_BACKBLAZE_SECRET
            _APP_STORAGE_BACKBLAZE_REGION: $$cap_APP_STORAGE_BACKBLAZE_REGION
            _APP_STORAGE_BACKBLAZE_BUCKET: $$cap_APP_STORAGE_BACKBLAZE_BUCKET
            _APP_STORAGE_LINODE_ACCESS_KEY: $$cap_APP_STORAGE_LINODE_ACCESS_KEY
            _APP_STORAGE_LINODE_SECRET: $$cap_APP_STORAGE_LINODE_SECRET
            _APP_STORAGE_LINODE_REGION: $$cap_APP_STORAGE_LINODE_REGION
            _APP_STORAGE_LINODE_BUCKET: $$cap_APP_STORAGE_LINODE_BUCKET
            _APP_STORAGE_WASABI_ACCESS_KEY: $$cap_APP_STORAGE_WASABI_ACCESS_KEY
            _APP_STORAGE_WASABI_SECRET: $$cap_APP_STORAGE_WASABI_SECRET
            _APP_STORAGE_WASABI_REGION: $$cap_APP_STORAGE_WASABI_REGION
            _APP_STORAGE_WASABI_BUCKET: $$cap_APP_STORAGE_WASABI_BUCKET

    $$cap_appname-worker-migrations:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-migrations"]
        volumes:
            - $$cap_appname-imports:/storage/imports
        depends_on:
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_DOMAIN_TARGET_CNAME: $$cap_APP_DOMAIN_TARGET_CNAME
            _APP_DOMAIN_TARGET_AAAA: $$cap_APP_DOMAIN_TARGET_AAAA
            _APP_DOMAIN_TARGET_A: $$cap_APP_DOMAIN_TARGET_A
            _APP_EMAIL_SECURITY: $$cap_APP_EMAIL_SECURITY
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_MIGRATIONS_FIREBASE_CLIENT_ID: $$cap_APP_MIGRATIONS_FIREBASE_CLIENT_ID
            _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET: $$cap_APP_MIGRATIONS_FIREBASE_CLIENT_SECRET

    $$cap_appname-task-maintenance:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["maintenance"]
        depends_on:
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_DOMAIN: $$cap_APP_DOMAIN_NAME
            _APP_DOMAIN_TARGET_CNAME: $$cap_APP_DOMAIN_TARGET_CNAME
            _APP_DOMAIN_TARGET_AAAA: $$cap_APP_DOMAIN_TARGET_AAAA
            _APP_DOMAIN_TARGET_A: $$cap_APP_DOMAIN_TARGET_A
            _APP_DOMAIN_FUNCTIONS: $$cap_APP_DOMAIN_FUNCTIONS
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_MAINTENANCE_INTERVAL: $$cap_APP_MAINTENANCE_INTERVAL
            _APP_MAINTENANCE_RETENTION_EXECUTION: $$cap_APP_MAINTENANCE_RETENTION_EXECUTION
            _APP_MAINTENANCE_RETENTION_CACHE: $$cap_APP_MAINTENANCE_RETENTION_CACHE
            _APP_MAINTENANCE_RETENTION_ABUSE: $$cap_APP_MAINTENANCE_RETENTION_ABUSE
            _APP_MAINTENANCE_RETENTION_AUDIT: $$cap_APP_MAINTENANCE_RETENTION_AUDIT
            _APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE: $$cap_APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE
            _APP_MAINTENANCE_RETENTION_USAGE_HOURLY: $$cap_APP_MAINTENANCE_RETENTION_USAGE_HOURLY
            _APP_MAINTENANCE_RETENTION_SCHEDULES: $$cap_APP_MAINTENANCE_RETENTION_SCHEDULES

    $$cap_appname-task-stats-resources:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["stats-resources"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_DATABASE_SHARED_TABLES: $$cap_APP_DATABASE_SHARED_TABLES
            _APP_STATS_RESOURCES_INTERVAL: $$cap_APP_STATS_RESOURCES_INTERVAL

    $$cap_appname-worker-stats-resources:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-stats-resources"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_STATS_RESOURCES_INTERVAL: $$cap_APP_STATS_RESOURCES_INTERVAL

    $$cap_appname-worker-stats-usage:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["worker-stats-usage"]
        depends_on:
            - $$cap_appname-redis
            - $$cap_appname-mariadb
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_USAGE_STATS: $$cap_APP_USAGE_STATS
            _APP_LOGGING_CONFIG: $$cap_APP_LOGGING_CONFIG
            _APP_USAGE_AGGREGATION_INTERVAL: $$cap_APP_USAGE_AGGREGATION_INTERVAL

    $$cap_appname-task-scheduler-functions:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["schedule-functions"]
        depends_on:
            - $$cap_appname-mariadb
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS

    $$cap_appname-task-scheduler-executions:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["schedule-executions"]
        depends_on:
            - $$cap_appname-mariadb
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS

    $$cap_appname-task-scheduler-messages:
        caproverExtra:
            notExposeAsWebApp: 'true'
            dockerfileLines:
                - FROM appwrite/appwrite:$$cap_APP_VERSION
                - ENTRYPOINT ["schedule-messages"]
        depends_on:
            - $$cap_appname-mariadb
            - $$cap_appname-redis
        environment:
            _APP_ENV: $$cap_APP_ENV
            _APP_WORKER_PER_CORE: $$cap_APP_WORKER_PER_CORE
            _APP_OPENSSL_KEY_V1: $$cap_APP_OPENSSL_KEY_V1
            _APP_REDIS_HOST: srv-captain--$$cap_appname-redis
            _APP_REDIS_PORT: $$cap_APP_REDIS_PORT
            _APP_REDIS_USER: $$cap_APP_REDIS_USER
            _APP_REDIS_PASS: $$cap_APP_REDIS_PASS
            _APP_DB_HOST: srv-captain--$$cap_appname-mariadb
            _APP_DB_PORT: $$cap_APP_DB_PORT
            _APP_DB_SCHEMA: $$cap_APP_DB_SCHEMA
            _APP_DB_USER: $$cap_APP_DB_USER
            _APP_DB_PASS: $$cap_APP_DB_PASS

    $$cap_appname-assistant:
        image: appwrite/assistant:$$cap_ASSISTANT_VERSION
        caproverExtra:
            notExposeAsWebApp: 'true'
        environment:
            _APP_ASSISTANT_OPENAI_API_KEY: $$cap_APP_ASSISTANT_OPENAI_API_KEY

    $$cap_appname-browser:
        image: appwrite/browser:$$cap_BROWSER_VERSION
        caproverExtra:
            notExposeAsWebApp: 'true'

caproverOneClickApp:
    displayName: Appwrite
    description: Secure Backend Server for Web, Mobile & Flutter Developers.
    isOfficial: false
    documentation: https://appwrite.io/docs
    instructions:
        start: |-
            Appwrite is a self-hosted solution that provides developers with a set of easy-to-use and integrate REST APIs to manage their core backend needs.

            IMPORTANT: You need to generate secure keys for OpenSSL Key and Executor Secret.
            You can use: openssl rand -base64 32

            Description of all available environment variables: https://appwrite.io/docs/environment-variables
        end: |-
            Appwrite has been successfully deployed!

            🎉 Your Appwrite instance is available at: https://$$cap_appname.$$cap_root_domain

            IMPORTANT: Please configure the following settings:
            1. Go to the settings for $$cap_appname
            2. Enable "Websocket Support"
            3. Click on "Edit Default Nginx Configurations" and add before the last closing bracket "}":

            ```
            location /v1/realtime {
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "upgrade";
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header Host $host;
                proxy_set_header X-Forwarded-Host $host;
                proxy_set_header X-Forwarded-Port $server_port;
                proxy_pass http://srv-captain--$$cap_appname-realtime;
                proxy_http_version 1.1;
                proxy_connect_timeout 7d;
                proxy_send_timeout 7d;
                proxy_read_timeout 7d;
            }

            location /console {
                proxy_pass http://srv-captain--$$cap_appname-console;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
            }
            ```

            📚 Documentation: https://appwrite.io/docs

            Note: It may take a few minutes for all services to be fully operational.

    variables:
        - label: Appwrite Version Tag
          id: $$cap_APP_VERSION
          description: Check out their valid tags at https://hub.docker.com/r/appwrite/appwrite/tags
          defaultValue: '1.7.4'
          validRegex: /^([^\s^\/])+$/
        - label: Console Version Tag
          id: $$cap_CONSOLE_VERSION
          description: Check out their valid tags at https://hub.docker.com/r/appwrite/console/tags
          defaultValue: '6.0.13'
          validRegex: /^([^\s^\/])+$/
        - label: Assistant Version Tag
          id: $$cap_ASSISTANT_VERSION
          description: Check out their valid tags at https://hub.docker.com/r/appwrite/assistant/tags
          defaultValue: '0.4.0'
          validRegex: /^([^\s^\/])+$/
        - label: Browser Version Tag
          id: $cap_BROWSER_VERSION
          description: Check out their valid tags at https://hub.docker.com/r/appwrite/browser/tags
          defaultValue: '0.2.4'
          validRegex: /^([^\s^\/])+$/
        - label: OpenRuntimes Executor Version Tag
          id: $cap_OPENRUNTIMES_EXECUTOR_VERSION
          description: Check out their valid tags at https://hub.docker.com/r/openruntimes/executor/tags
          defaultValue: '0.7.14'
          validRegex: /^([^\s^\/])+$/
        - label: _APP_ENV
          id: $cap_APP_ENV
          description: Set your server running environment.
          defaultValue: production
          validRegex: /^(production|development)$/
        - label: _APP_LOCALE
          id: $cap_APP_LOCALE
          description: Set your Appwrite's locale. By default, the locale is set to 'en'.
          defaultValue: en
          validRegex: /^([^\s^\/])+$/
        - label: _APP_WORKER_PER_CORE
          id: $cap_APP_WORKER_PER_CORE
          description: Internal Worker per core for the API, Realtime and Executor containers.
          defaultValue: 6
          validRegex: /.{1,}/
        - label: _APP_COMPRESSION_MIN_SIZE_BYTES
          id: $cap_APP_COMPRESSION_MIN_SIZE_BYTES
          description: Minimum size in bytes for response compression
          defaultValue: 1024
          validRegex: /.{1,}/
        - label: _APP_CONSOLE_WHITELIST_ROOT
          id: $cap_APP_CONSOLE_WHITELIST_ROOT
          description: Disable creation of new users on the Appwrite console. When enabled only 1 user will be able to use the registration form.
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_CONSOLE_WHITELIST_EMAILS
          id: $cap_APP_CONSOLE_WHITELIST_EMAILS
          description: Limit creation of new users on the Appwrite console. Pass a list of allowed email addresses separated by a comma.
          defaultValue: ''
        - label: _APP_CONSOLE_SESSION_ALERTS
          id: $cap_APP_CONSOLE_SESSION_ALERTS
          description: Show session alerts on the console
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_CONSOLE_WHITELIST_IPS
          id: $cap_APP_CONSOLE_WHITELIST_IPS
          description: Limit creation of users in Appwrite console for users sharing the same set of IP addresses.
          defaultValue: ''
        - label: _APP_CONSOLE_HOSTNAMES
          id: $cap_APP_CONSOLE_HOSTNAMES
          description: This option allows you to restrict access to the Appwrite console
          defaultValue: ''
        - label: _APP_SYSTEM_EMAIL_NAME
          id: $cap_APP_SYSTEM_EMAIL_NAME
          description: Sender name value that will appear on email messages sent to developers from the Appwrite console.
          defaultValue: Appwrite
          validRegex: /^([^\s^\/])+$/
        - label: _APP_SYSTEM_EMAIL_ADDRESS
          id: $cap_APP_SYSTEM_EMAIL_ADDRESS
          description: Sender email address that will appear on email messages sent to developers from the Appwrite console.
          defaultValue: team@appwrite.io
          validRegex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
        - label: _APP_EMAIL_SECURITY
          id: $cap_APP_EMAIL_SECURITY
          description: Email address used to issue SSL certificates for custom domains or the user agent in your webhooks payload.
          defaultValue: certs@appwrite.io
          validRegex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
        - label: _APP_SYSTEM_SECURITY_EMAIL_ADDRESS
          id: $cap_APP_SYSTEM_SECURITY_EMAIL_ADDRESS
          description: Email address used to issue SSL certificates for custom domains or the user agent in your webhooks payload.
          defaultValue: certs@appwrite.io
          validRegex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
        - label: _APP_SYSTEM_RESPONSE_FORMAT
          id: $cap_APP_SYSTEM_RESPONSE_FORMAT
          description: Use this environment variable to set the default Appwrite HTTP response format to support an older version of Appwrite.
          defaultValue: ''
        - label: _APP_OPTIONS_ABUSE
          id: $cap_APP_OPTIONS_ABUSE
          description: Allows you to disable abuse checks and API rate limiting. Set to 'disabled' to cancel abuse checking.
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_OPTIONS_ROUTER_PROTECTION
          id: $cap_APP_OPTIONS_ROUTER_PROTECTION
          description: Router protection
          defaultValue: 'disabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_OPTIONS_FORCE_HTTPS
          id: $cap_APP_OPTIONS_FORCE_HTTPS
          description: Force HTTPS connection to your API. This feature redirects any HTTP call to HTTPS.
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_OPTIONS_ROUTER_FORCE_HTTPS
          id: $cap_APP_OPTIONS_ROUTER_FORCE_HTTPS
          description: Force HTTPS for router connections
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_OPENSSL_KEY_V1
          id: $cap_APP_OPENSSL_KEY_V1
          description: Server private secret key used to encrypt all sensitive data. Generate with: openssl rand -base64 32
          defaultValue: $cap_gen_random_hex(256)
          validRegex: /.{32,}/
        - label: _APP_DOMAIN
          id: $cap_APP_DOMAIN_NAME
          description: Your Appwrite domain address. When setting a public suffix domain, Appwrite will attempt to issue a valid SSL certificate automatically.
          defaultValue: https://$cap_appname.$cap_root_domain
          validRegex: /^([^\s^\/])+$/
        - label: _APP_DOMAIN_TARGET_CNAME
          id: $cap_APP_DOMAIN_TARGET_CNAME
          description: A DNS CNAME record hostname to serve as a target for your Appwrite custom domains.
          defaultValue: $cap_appname.$cap_root_domain
        - label: _APP_DOMAIN_TARGET_AAAA
          id: $cap_APP_DOMAIN_TARGET_AAAA
          description: A DNS AAAA record value to serve as a target for your Appwrite custom domains.
          defaultValue: ''
        - label: _APP_DOMAIN_TARGET_A
          id: $cap_APP_DOMAIN_TARGET_A
          description: A DNS A record value to serve as a target for your Appwrite custom domains.
          defaultValue: ''
        - label: _APP_DOMAIN_FUNCTIONS
          id: $cap_APP_DOMAIN_FUNCTIONS
          description: A domain to use for function preview URLs. Setting to empty turns off function preview URLs.
          defaultValue: https://$cap_appname.$cap_root_domain
        - label: _APP_DOMAIN_SITES
          id: $cap_APP_DOMAIN_SITES
          description: A domain to use for hosting static sites. Setting to empty turns off static sites hosting.
          defaultValue: https://$cap_appname.$cap_root_domain
        - label: _APP_REDIS_PORT
          id: $cap_APP_REDIS_PORT
          description: Redis server TCP port.
          defaultValue: 6379
          validRegex: /.{1,}/
        - label: _APP_REDIS_USER
          id: $cap_APP_REDIS_USER
          description: Redis server user. This is an optional variable.
          defaultValue: ''
        - label: _APP_REDIS_PASS
          id: $cap_APP_REDIS_PASS
          description: Redis server password. This is an optional variable.
          defaultValue: ''
        - label: _APP_DB_PORT
          id: $cap_APP_DB_PORT
          description: MariaDB server TCP port.
          defaultValue: 3306
          validRegex: /.{1,}/
        - label: _APP_DB_SCHEMA
          id: $cap_APP_DB_SCHEMA
          description: MariaDB server database schema.
          defaultValue: appwrite
          validRegex: /^([^\s^\/])+$/
        - label: _APP_DB_USER
          id: $cap_APP_DB_USER
          description: MariaDB server user name.
          defaultValue: user
          validRegex: /^([^\s^\/])+$/
        - label: _APP_DB_PASS
          id: $cap_APP_DB_PASS
          description: MariaDB server user password.
          defaultValue: $cap_gen_random_hex(16)
          validRegex: /.{8,}/
        - label: _APP_DB_ROOT_PASS
          id: $cap_APP_DB_ROOT_PASS
          description: MariaDB server root password.
          defaultValue: $cap_gen_random_hex(16)
          validRegex: /.{8,}/
        - label: _APP_SMTP_HOST
          id: $cap_APP_SMTP_HOST
          description: SMTP server host name address. Use an empty string to disable all mail sending from the server.
          defaultValue: ''
        - label: _APP_SMTP_PORT
          id: $cap_APP_SMTP_PORT
          description: SMTP server TCP port.
          defaultValue: '587'
        - label: _APP_SMTP_SECURE
          id: $cap_APP_SMTP_SECURE
          description: SMTP secure connection protocol. Change to 'tls' if running on a secure connection.
          defaultValue: 'tls'
        - label: _APP_SMTP_USERNAME
          id: $cap_APP_SMTP_USERNAME
          description: SMTP server user name.
          defaultValue: ''
        - label: _APP_SMTP_PASSWORD
          id: $cap_APP_SMTP_PASSWORD
          description: SMTP server user password.
          defaultValue: ''
        - label: _APP_USAGE_STATS
          id: $cap_APP_USAGE_STATS
          description: This variable allows you to disable the collection and displaying of usage stats.
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_STORAGE_LIMIT
          id: $cap_APP_STORAGE_LIMIT
          description: Maximum file size allowed for file upload. The default value is 30MB. Pass your size limit value in bytes.
          defaultValue: 30000000
          validRegex: /.{1,}/
        - label: _APP_STORAGE_PREVIEW_LIMIT
          id: $cap_APP_STORAGE_PREVIEW_LIMIT
          description: Maximum file size allowed for file image preview. The default value is 20MB. Pass your size limit value in bytes.
          defaultValue: 20000000
          validRegex: /.{1,}/
        - label: _APP_STORAGE_ANTIVIRUS
          id: $cap_APP_STORAGE_ANTIVIRUS
          description: This variable allows you to disable the internal anti-virus scans. Set to 'enabled' to enable scans.
          defaultValue: 'disabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_STORAGE_ANTIVIRUS_HOST
          id: $cap_APP_STORAGE_ANTIVIRUS_HOST
          description: ClamAV server host name address.
          defaultValue: clamav
        - label: _APP_STORAGE_ANTIVIRUS_PORT
          id: $cap_APP_STORAGE_ANTIVIRUS_PORT
          description: ClamAV server TCP port.
          defaultValue: 3310
          validRegex: /.{1,}/
        - label: _APP_STORAGE_DEVICE
          id: $cap_APP_STORAGE_DEVICE
          description: Select default storage device. Supported adapters are 'Local', 'S3', 'DOSpaces', 'Backblaze', 'Linode' and 'Wasabi'.
          defaultValue: Local
          validRegex: /^(Local|S3|DOSpaces|Backblaze|Linode|Wasabi)$/
        - label: _APP_STORAGE_S3_ACCESS_KEY
          id: $cap_APP_STORAGE_S3_ACCESS_KEY
          description: AWS S3 storage access key. Required when the storage adapter is set to S3.
          defaultValue: ''
        - label: _APP_STORAGE_S3_SECRET
          id: $cap_APP_STORAGE_S3_SECRET
          description: AWS S3 storage secret key. Required when the storage adapter is set to S3.
          defaultValue: ''
        - label: _APP_STORAGE_S3_REGION
          id: $cap_APP_STORAGE_S3_REGION
          description: AWS S3 storage region. Required when storage adapter is set to S3.
          defaultValue: us-east-1
        - label: _APP_STORAGE_S3_BUCKET
          id: $cap_APP_STORAGE_S3_BUCKET
          description: AWS S3 storage bucket. Required when storage adapter is set to S3.
          defaultValue: ''
        - label: _APP_STORAGE_S3_ENDPOINT
          id: $cap_APP_STORAGE_S3_ENDPOINT
          description: AWS S3 storage endpoint. Required when storage adapter is set to S3.
          defaultValue: ''
        - label: _APP_STORAGE_DO_SPACES_ACCESS_KEY
          id: $cap_APP_STORAGE_DO_SPACES_ACCESS_KEY
          description: DigitalOcean spaces access key. Required when the storage adapter is set to DOSpaces.
          defaultValue: ''
        - label: _APP_STORAGE_DO_SPACES_SECRET
          id: $cap_APP_STORAGE_DO_SPACES_SECRET
          description: DigitalOcean spaces secret key. Required when the storage adapter is set to DOSpaces.
          defaultValue: ''
        - label: _APP_STORAGE_DO_SPACES_REGION
          id: $cap_APP_STORAGE_DO_SPACES_REGION
          description: DigitalOcean spaces region. Required when storage adapter is set to DOSpaces.
          defaultValue: us-east-1
        - label: _APP_STORAGE_DO_SPACES_BUCKET
          id: $cap_APP_STORAGE_DO_SPACES_BUCKET
          description: DigitalOcean spaces bucket. Required when storage adapter is set to DOSpaces.
          defaultValue: ''
        - label: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
          id: $cap_APP_STORAGE_BACKBLAZE_ACCESS_KEY
          description: Backblaze access key. Required when the storage adapter is set to Backblaze.
          defaultValue: ''
        - label: _APP_STORAGE_BACKBLAZE_SECRET
          id: $cap_APP_STORAGE_BACKBLAZE_SECRET
          description: Backblaze secret key. Required when the storage adapter is set to Backblaze.
          defaultValue: ''
        - label: _APP_STORAGE_BACKBLAZE_REGION
          id: $cap_APP_STORAGE_BACKBLAZE_REGION
          description: Backblaze region. Required when storage adapter is set to Backblaze.
          defaultValue: us-west-004
        - label: _APP_STORAGE_BACKBLAZE_BUCKET
          id: $cap_APP_STORAGE_BACKBLAZE_BUCKET
          description: Backblaze bucket. Required when storage adapter is set to Backblaze.
          defaultValue: ''
        - label: _APP_STORAGE_LINODE_ACCESS_KEY
          id: $cap_APP_STORAGE_LINODE_ACCESS_KEY
          description: Linode object storage access key. Required when the storage adapter is set to Linode.
          defaultValue: ''
        - label: _APP_STORAGE_LINODE_SECRET
          id: $cap_APP_STORAGE_LINODE_SECRET
          description: Linode object storage secret key. Required when the storage adapter is set to Linode.
          defaultValue: ''
        - label: _APP_STORAGE_LINODE_REGION
          id: $cap_APP_STORAGE_LINODE_REGION
          description: Linode object storage region. Required when storage adapter is set to Linode.
          defaultValue: eu-central-1
        - label: _APP_STORAGE_LINODE_BUCKET
          id: $cap_APP_STORAGE_LINODE_BUCKET
          description: Linode object storage bucket. Required when storage adapter is set to Linode.
          defaultValue: ''
        - label: _APP_STORAGE_WASABI_ACCESS_KEY
          id: $cap_APP_STORAGE_WASABI_ACCESS_KEY
          description: Wasabi access key. Required when the storage adapter is set to Wasabi.
          defaultValue: ''
        - label: _APP_STORAGE_WASABI_SECRET
          id: $cap_APP_STORAGE_WASABI_SECRET
          description: Wasabi secret key. Required when the storage adapter is set to Wasabi.
          defaultValue: ''
        - label: _APP_STORAGE_WASABI_REGION
          id: $cap_APP_STORAGE_WASABI_REGION
          description: Wasabi region. Required when storage adapter is set to Wasabi.
          defaultValue: eu-central-1
        - label: _APP_STORAGE_WASABI_BUCKET
          id: $cap_APP_STORAGE_WASABI_BUCKET
          description: Wasabi bucket. Required when storage adapter is set to Wasabi.
          defaultValue: ''
        - label: _APP_COMPUTE_SIZE_LIMIT
          id: $cap_APP_COMPUTE_SIZE_LIMIT
          description: The maximum size deployment in bytes. The default value is 30MB.
          defaultValue: 30000000
          validRegex: /.{1,}/
        - label: _APP_FUNCTIONS_TIMEOUT
          id: $cap_APP_FUNCTIONS_TIMEOUT
          description: The maximum number of seconds allowed as a timeout value when creating a new function.
          defaultValue: 900
          validRegex: /.{1,}/
        - label: _APP_SITES_TIMEOUT
          id: $cap_APP_SITES_TIMEOUT
          description: The maximum number of seconds allowed as a timeout value when creating a new site.
          defaultValue: 900
          validRegex: /.{1,}/
        - label: _APP_COMPUTE_BUILD_TIMEOUT
          id: $cap_APP_COMPUTE_BUILD_TIMEOUT
          description: The maximum number of seconds allowed as a timeout value when building a new function.
          defaultValue: 900
          validRegex: /.{1,}/
        - label: _APP_COMPUTE_CPUS
          id: $cap_APP_COMPUTE_CPUS
          description: The maximum number of CPU core a single cloud function is allowed to use.
          defaultValue: 0
          validRegex: /.{1,}/
        - label: _APP_COMPUTE_MEMORY
          id: $cap_APP_COMPUTE_MEMORY
          description: The maximum amount of memory a single cloud function is allowed to use in megabytes.
          defaultValue: 0
          validRegex: /.{1,}/
        - label: _APP_FUNCTIONS_RUNTIMES
          id: $cap_APP_FUNCTIONS_RUNTIMES
          description: This option allows you to enable or disable runtime environments for cloud functions.
          defaultValue: node-20.0,php-8.2,python-3.11,ruby-3.2,dart-3.0,dotnet-6.0,java-18.0,swift-5.5,kotlin-1.6,cpp-17,bun-1.0
        - label: _APP_SITES_RUNTIMES
          id: $cap_APP_SITES_RUNTIMES
          description: This option allows you to enable or disable runtime environments for static sites.
          defaultValue: node-20.0,php-8.2,python-3.11,ruby-3.2,static
        - label: _APP_EXECUTOR_SECRET
          id: $cap_APP_EXECUTOR_SECRET
          description: The secret key used by Appwrite to communicate with the function executor. Generate with: openssl rand -base64 32
          defaultValue: $cap_gen_random_hex(256)
          validRegex: /.{32,}/
        - label: _APP_COMPUTE_INACTIVE_THRESHOLD
          id: $cap_APP_COMPUTE_INACTIVE_THRESHOLD
          description: The minimum time a function can be inactive before its container is shutdown and put to sleep.
          defaultValue: 60
          validRegex: /.{1,}/
        - label: _APP_COMPUTE_MAINTENANCE_INTERVAL
          id: $cap_APP_COMPUTE_MAINTENANCE_INTERVAL
          description: Interval value containing the number of seconds that the executor should wait before checking for inactive runtimes.
          defaultValue: 400
          validRegex: /.{1,}/
        - label: _APP_COMPUTE_RUNTIMES_NETWORK
          id: $cap_APP_COMPUTE_RUNTIMES_NETWORK
          description: The network used by the executor to communicate with runtimes.
          defaultValue: captain-overlay-network
        - label: _APP_LOGGING_CONFIG
          id: $cap_APP_LOGGING_CONFIG
          description: This variable configures authentication to 3rd party error logging providers.
          defaultValue: ''
        - label: _APP_MAINTENANCE_INTERVAL
          id: $cap_APP_MAINTENANCE_INTERVAL
          description: Interval value containing the number of seconds that the Appwrite maintenance process should wait before executing system cleanups.
          defaultValue: 86400
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_DELAY
          id: $cap_APP_MAINTENANCE_DELAY
          description: Delay in seconds before starting maintenance tasks.
          defaultValue: 0
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_START_TIME
          id: $cap_APP_MAINTENANCE_START_TIME
          description: Specific time to start maintenance tasks (in UTC).
          defaultValue: ''
        - label: _APP_MAINTENANCE_RETENTION_EXECUTION
          id: $cap_APP_MAINTENANCE_RETENTION_EXECUTION
          description: The maximum duration (in seconds) upto which to retain execution logs.
          defaultValue: 1209600
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_CACHE
          id: $cap_APP_MAINTENANCE_RETENTION_CACHE
          description: The maximum duration (in seconds) upto which to retain cached files.
          defaultValue: 2592000
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_ABUSE
          id: $cap_APP_MAINTENANCE_RETENTION_ABUSE
          description: The maximum duration (in seconds) upto which to retain abuse logs.
          defaultValue: 86400
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_AUDIT
          id: $cap_APP_MAINTENANCE_RETENTION_AUDIT
          description: The maximum duration (in seconds) upto which to retain audit logs.
          defaultValue: 1209600
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE
          id: $cap_APP_MAINTENANCE_RETENTION_AUDIT_CONSOLE
          description: The maximum duration (in seconds) upto which to retain console audit logs.
          defaultValue: 1209600
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_USAGE_HOURLY
          id: $cap_APP_MAINTENANCE_RETENTION_USAGE_HOURLY
          description: The maximum duration (in seconds) upto which to retain hourly usage metrics.
          defaultValue: 8640000
          validRegex: /.{1,}/
        - label: _APP_MAINTENANCE_RETENTION_SCHEDULES
          id: $cap_APP_MAINTENANCE_RETENTION_SCHEDULES
          description: Schedules deletion interval (in seconds).
          defaultValue: 86400
          validRegex: /.{1,}/
        - label: _APP_SMS_PROVIDER
          id: $cap_APP_SMS_PROVIDER
          description: Provider used for delivering SMS for Phone authentication. Available providers are twilio, textmagic, telesign, msg91, and vonage.
          defaultValue: ''
        - label: _APP_SMS_FROM
          id: $cap_APP_SMS_FROM
          description: Phone number used for sending out messages. Must start with a leading '+' and maximum of 15 digits.
          defaultValue: ''
        - label: _APP_GRAPHQL_MAX_BATCH_SIZE
          id: $cap_APP_GRAPHQL_MAX_BATCH_SIZE
          description: Maximum number of batched queries per request.
          defaultValue: 10
          validRegex: /.{1,}/
        - label: _APP_GRAPHQL_MAX_COMPLEXITY
          id: $cap_APP_GRAPHQL_MAX_COMPLEXITY
          description: Maximum complexity of a GraphQL query.
          defaultValue: 250
          validRegex: /.{1,}/
        - label: _APP_GRAPHQL_MAX_DEPTH
          id: $cap_APP_GRAPHQL_MAX_DEPTH
          description: Maximum depth of a GraphQL query.
          defaultValue: 3
          validRegex: /.{1,}/
        - label: _APP_VCS_GITHUB_APP_NAME
          id: $cap_APP_VCS_GITHUB_APP_NAME
          description: Name of your GitHub app. This value should be set to your GitHub application's URL.
          defaultValue: ''
        - label: _APP_VCS_GITHUB_PRIVATE_KEY
          id: $cap_APP_VCS_GITHUB_PRIVATE_KEY
          description: GitHub app RSA private key. You can generate private keys from GitHub application settings.
          defaultValue: ''
        - label: _APP_VCS_GITHUB_APP_ID
          id: $cap_APP_VCS_GITHUB_APP_ID
          description: GitHub application ID. You can find it in your GitHub application details.
          defaultValue: ''
        - label: _APP_VCS_GITHUB_WEBHOOK_SECRET
          id: $cap_APP_VCS_GITHUB_WEBHOOK_SECRET
          description: GitHub webhook secret. You can configure it in your GitHub application settings under webhook section.
          defaultValue: ''
        - label: _APP_VCS_GITHUB_CLIENT_SECRET
          id: $cap_APP_VCS_GITHUB_CLIENT_SECRET
          description: GitHub client secret. You can generate secrets in your GitHub application settings.
          defaultValue: ''
        - label: _APP_VCS_GITHUB_CLIENT_ID
          id: $cap_APP_VCS_GITHUB_CLIENT_ID
          description: GitHub client ID. You can find it in your GitHub application details.
          defaultValue: ''
        - label: _APP_MIGRATIONS_FIREBASE_CLIENT_ID
          id: $cap_APP_MIGRATIONS_FIREBASE_CLIENT_ID
          description: Google OAuth client ID. You can find it in your GCP application settings.
          defaultValue: ''
        - label: _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET
          id: $cap_APP_MIGRATIONS_FIREBASE_CLIENT_SECRET
          description: Google OAuth client secret. You can generate secrets in your GCP application settings.
          defaultValue: ''
        - label: _APP_ASSISTANT_OPENAI_API_KEY
          id: $cap_APP_ASSISTANT_OPENAI_API_KEY
          description: OpenAI API key. You can find it in your OpenAI application settings.
          defaultValue: ''
        - label: _APP_DOCKER_HUB_USERNAME
          id: $cap_APP_DOCKER_HUB_USERNAME
          description: The username for hub.docker.com. This variable is used to pull images from hub.docker.com.
          defaultValue: ''
        - label: _APP_DOCKER_HUB_PASSWORD
          id: $cap_APP_DOCKER_HUB_PASSWORD
          description: The password for hub.docker.com. This variable is used to pull images from hub.docker.com.
          defaultValue: ''
        - label: _APP_EMAIL_CERTIFICATES
          id: $cap_APP_EMAIL_CERTIFICATES
          description: Enable or disable email notifications for SSL certificate generation.
          defaultValue: 'enabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_DATABASE_SHARED_TABLES
          id: $cap_APP_DATABASE_SHARED_TABLES
          description: Enable or disable shared database tables.
          defaultValue: 'disabled'
          validRegex: /^(enabled|disabled)$/
        - label: _APP_STATS_RESOURCES_INTERVAL
          id: $cap_APP_STATS_RESOURCES_INTERVAL
          description: Interval for collecting resource statistics (in seconds).
          defaultValue: 3600
          validRegex: /.{1,}/
        - label: _APP_USAGE_AGGREGATION_INTERVAL
          id: $cap_APP_USAGE_AGGREGATION_INTERVAL
          description: Interval value containing the number of seconds that the Appwrite usage process should wait before aggregating stats.
          defaultValue: 30
          validRegex: /.{1,}/
