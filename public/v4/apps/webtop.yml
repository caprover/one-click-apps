captainVersion: 4
services:
    $$cap_appname:
        image: lscr.io/linuxserver/webtop:$$cap_WEBTOP_VERSION
        hostname: $$cap_appname.$$cap_root_domain
        environment:
            TZ: $$cap_WEBTOP_TZ
            PUID: $$cap_WEBTOP_PUID
            PGID: $$cap_WEBTOP_PGID
            CUSTOM_USER: $$cap_WEBTOP_CUSTOM_USER
            PASSWORD: $$cap_WEBTOP_PASSWORD
            TITLE: $$cap_WEBTOP_TITLE
        volumes:
            - $$cap_appname-config:/config
        caproverExtra:
            containerHttpPort: 3000
caproverOneClickApp:
    displayName: Webtop
    description: Linux in a web browser supporting popular desktop environments.
    isOfficial: true
    documentation: See https://docs.linuxserver.io/images/docker-webtop
    instructions:
        start: |-
            Alpine, Ubuntu, Fedora, and Arch based containers containing full desktop environments in officially supported flavors accessible via any modern web browser.
            Please note, that the Docker socket is not mounted and that hardware acceleration is disabled.
        end: >
            Webtop has been successfully deployed! It might take few moments before it's fully started.
            Please turn on "Websocket Support" in the settings.
            You can access it at http://$$cap_appname.$$cap_root_domain with login user `$$cap_WEBTOP_CUSTOM_USER` and password `$$cap_WEBTOP_PASSWORD`
    variables:
        - id: $$cap_WEBTOP_VERSION
          label: Version Tag
          description: Check out their documentation for the valid tags https://docs.linuxserver.io/images/docker-webtop#version-tags
          defaultValue: ubuntu-xfce
          validRegex: "/^([^\\s^\\/])+$/"
        - id: $$cap_WEBTOP_TZ
          label: Timezone
          description: Timezone for the application, find yours at https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
          defaultValue: Etc/UTC
          validRegex: /.{1,}/
        - id: $$cap_WEBTOP_PUID
          label: User ID
          defaultValue: '1000'
          description: User ID that the process uses, run (id $user) on your instance to see the ID
          validRegex: /.{1,}/
        - id: $$cap_WEBTOP_PGID
          label: Group ID
          defaultValue: '1000'
          description: Group ID that the process uses, run (id $user) on your instance to see the ID
          validRegex: /.{1,}/
        - id: $$cap_WEBTOP_CUSTOM_USER
          label: User
          description: HTTP basic authentication user name. Default is `abc`
          defaultValue: abc
          validRegex: "/^([^\\s^\\/])+$/"
        - id: $$cap_WEBTOP_PASSWORD
          label: Password
          description: HTTP basic authentication password. Default is `abc`. If unset there will be no authentication.
          defaultValue: $$cap_gen_random_hex(16)
        - id: $$cap_WEBTOP_TITLE
          label: Title
          description: The page title displayed on the web browser, default is "KasmVNC Client".
          defaultValue: KasmVNC Client
          validRegex: /.{1,}/
