captainVersion: 4
services:
    $$cap_appname:
        image: baserow/baserow:$$cap_BASEROW_VERSION
        environment:
            BASEROW_PUBLIC_URL: http://$$cap_appname.$$cap_root_domain
            FROM_EMAIL: $$cap_BASEROW_FROM_EMAIL
            EMAIL_SMTP: $$cap_BASEROW_EMAIL_SMTP_ENABLED
            EMAIL_SMTP_HOST: $$cap_BASEROW_EMAIL_SMTP_HOST
            EMAIL_SMTP_PORT: $$cap_BASEROW_EMAIL_SMTP_PORT
            EMAIL_SMTP_USER: $$cap_BASEROW_EMAIL_SMTP_USER
            EMAIL_SMTP_PASSWORD: $$cap_BASEROW_EMAIL_SMTP_PASSWORD
            EMAIL_SMTP_USE_TLS: $$cap_BASEROW_EMAIL_SMTP_USE_TLS
            EMAIL_SMTP_USE_SSL: $$cap_BASEROW_EMAIL_SMTP_USE_SSL
        volumes:
            - $$cap_appname-data:/baserow/data
caproverOneClickApp:
    instructions:
        start: |-
            Baserow is an open-source online database tool.
            Users can use this no-code platform to create a database without any technical experience.
            It lowers the barriers to app creation so that anyone who can work with a spreadsheet can also create a database.
            The interface looks a lot like a spreadsheet.
        end: |-
            Baserow has been successfully deployed! It might take few moments before it's fully started.
            You can access it at `http://$$cap_appname.$$cap_root_domain`

            Please do the following steps:
            1. Activate **WebSocket Support**
            2. If you enabled HTTPS, you should adjust the `BASEROW_PUBLIC_URL` environment variable accordingly

            Enjoy your self-hosted Airtable alternative!
    displayName: Baserow
    isOfficial: true
    description: Open Source No-Code Database And Airtable Alternative
    documentation: https://baserow.io/docs
    variables:
        - id: $$cap_BASEROW_VERSION
          label: Version
          description: >-
              Check out their valid tags at https://hub.docker.com/r/baserow/baserow/tags
          defaultValue: '1.18.0'
          validRegex: /.{1,}/
        - id: $$cap_BASEROW_FROM_EMAIL
          label: Mail | From
          description: >-
              The email address Baserow will send emails from
        - id: $$cap_BASEROW_EMAIL_SMTP_ENABLED
          label: SMTP | Enabled
          description: >-
              If set to any non empty value then Baserow will start sending emails using the configuration options below.
              If not set then Baserow will not send emails and just print them to the logs instead
        - id: $$cap_BASEROW_EMAIL_SMTP_HOST
          label: SMTP | Host
          description: >-
              The host of the external SMTP server that Baserow should use to send emails
        - id: $$cap_BASEROW_EMAIL_SMTP_PORT
          label: SMTP | Port
          description: >-
              The host's port of the external SMTP server
        - id: $$cap_BASEROW_EMAIL_SMTP_USER
          label: SMTP | User
          description: >-
              The username to authenticate with the external SMTP server when sending emails
        - id: $$cap_BASEROW_EMAIL_SMTP_PASSWORD
          label: SMTP | Password
          description: >-
              The password to authenticate with the external SMTP server when sending emails
        - id: $$cap_BASEROW_EMAIL_SMTP_USE_TLS
          label: SMTP | Use TLS
          description: >-
              If set to any non empty value then Baserow will attempt to send emails using TLS.
              Whether to use a TLS (secure) connection when talking to the SMTP server.
              This is used for explicit TLS connections, generally on port 587.
              If you are experiencing hanging connections, see the implicit TLS setting `EMAIL_SMTP_USE_SSL`
        - id: $$cap_BASEROW_EMAIL_SMTP_USE_SSL
          label: SMTP | Use SSL
          description: >-
              If set to any non empty value then an implicit TLS (secure) connection will be used when talking to the SMTP server.
              In most email documentation this type of TLS connection is referred to as SSL.
              It is generally used on port 465.
              If you are experiencing problems, see the explicit TLS setting `EMAIL_SMTP_USE_TLS`.
              Note that `EMAIL_SMTP_USE_TLS` / `EMAIL_SMTP_USE_SSL` are mutually exclusive, so only set one of those settings
